<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Imported: https://newme-school.co.jp</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&display=swap" rel="stylesheet">
  <style>/* Reset & Base */
*, *::before, *::after {
  box-sizing: border-box;
  border-width: 0;
  border-style: solid;
  border-color: #e5e7eb;
}
html {
  line-height: 1.5;
  -webkit-text-size-adjust: 100%;
  font-family: 'Noto Sans JP', ui-sans-serif, system-ui, sans-serif;
}
body {
  margin: 0;
  line-height: inherit;
  font-family: 'Noto Sans JP', sans-serif;
  scroll-behavior: smooth;
}
img {
  display: block;
  max-width: 100%;
  height: auto;
}
a {
  color: inherit;
  text-decoration: inherit;
}
button, input, textarea {
  font-family: inherit;
  font-size: 100%;
  line-height: inherit;
  color: inherit;
  margin: 0;
  padding: 0;
}
button {
  cursor: pointer;
  background-color: transparent;
  background-image: none;
}

/* Layout */
.flex { display: flex; }
.flex-col { flex-direction: column; }
.items-center { align-items: center; }
.items-start { align-items: flex-start; }
.items-end { align-items: flex-end; }
.justify-between { justify-content: space-between; }
.justify-center { justify-content: center; }
.gap-6 { gap: 1.5rem; }

/* Sizing */
.w-full { width: 100%; }
.h-16 { height: 4rem; }
.h-48 { height: 12rem; }
.h-auto { height: auto; }
.min-h-screen { min-height: 100vh; }
.max-w-sm { max-width: 24rem; }
.max-w-md { max-width: 28rem; }
.max-w-xl { max-width: 36rem; }

/* Spacing */
.mx-auto { margin-left: auto; margin-right: auto; }
.mt-1 { margin-top: 0.25rem; }
.mt-2 { margin-top: 0.5rem; }
.mb-8 { margin-bottom: 2rem; }
.px-4 { padding-left: 1rem; padding-right: 1rem; }
.px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
.px-8 { padding-left: 2rem; padding-right: 2rem; }
.py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
.py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
.py-8 { padding-top: 2rem; padding-bottom: 2rem; }
.py-12 { padding-top: 3rem; padding-bottom: 3rem; }
.p-2 { padding: 0.5rem; }
.space-y-4 > * + * { margin-top: 1rem; }

/* Position */
.relative { position: relative; }
.absolute { position: absolute; }
.sticky { position: sticky; }
.inset-0 { top: 0; right: 0; bottom: 0; left: 0; }
.inset-x-0 { left: 0; right: 0; }
.top-0 { top: 0; }
.top-10 { top: 2.5rem; }
.top-1\/2 { top: 50%; }
.bottom-10 { bottom: 2.5rem; }
.-translate-y-1\/2 { transform: translateY(-50%); }
.z-10 { z-index: 10; }
.z-20 { z-index: 20; }
.z-50 { z-index: 50; }

/* Typography */
.text-sm { font-size: 0.875rem; line-height: 1.25rem; }
.text-xl { font-size: 1.25rem; line-height: 1.75rem; }
.text-2xl { font-size: 1.5rem; line-height: 2rem; }
.font-medium { font-weight: 500; }
.font-bold { font-weight: 700; }
.font-black { font-weight: 900; }
.tracking-tight { letter-spacing: -0.025em; }
.leading-tight { line-height: 1.25; }
.text-center { text-align: center; }
.whitespace-pre-wrap { white-space: pre-wrap; }

/* Colors */
.text-white { color: #ffffff; }
.text-black { color: #000000; }
.text-gray-400 { color: #9ca3af; }
.text-gray-600 { color: #4b5563; }
.text-gray-700 { color: #374151; }
.text-gray-900 { color: #111827; }
.bg-white { background-color: #ffffff; }
.bg-white\/90 { background-color: rgba(255, 255, 255, 0.9); }
.bg-gray-50 { background-color: #f9fafb; }
.bg-gray-100 { background-color: #f3f4f6; }
.bg-gray-900 { background-color: #111827; }
.bg-blue-600 { background-color: #2563eb; }

/* Borders */
.border { border-width: 1px; }
.border-gray-300 { border-color: #d1d5db; }
.rounded-md { border-radius: 0.375rem; }
.rounded-full { border-radius: 9999px; }
.rounded-lg { border-radius: 0.5rem; }

/* Shadows */
.shadow-sm { box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); }
.shadow { box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1); }
.shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1); }
.shadow-2xl { box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); }

/* Effects */
.opacity-70 { opacity: 0.7; }
.overflow-hidden { overflow: hidden; }
.backdrop-blur-md { backdrop-filter: blur(12px); }
.pointer-events-none { pointer-events: none; }
.drop-shadow-text { filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.8)); }

/* Transitions */
.transition-colors { transition-property: color, background-color, border-color; transition-duration: 150ms; }
.transition-transform { transition-property: transform; transition-duration: 150ms; }
.transition-all { transition-property: all; transition-duration: 150ms; }

/* Interactive States */
.hover\:text-blue-600:hover { color: #2563eb; }
.hover\:bg-blue-700:hover { background-color: #1d4ed8; }
.hover\:bg-gray-100:hover { background-color: #f3f4f6; }
.hover\:scale-105:hover { transform: scale(1.05); }
.active\:scale-95:active { transform: scale(0.95); }
.focus\:border-blue-500:focus { border-color: #3b82f6; }
.focus\:ring-blue-500:focus {
  outline: 2px solid transparent;
  outline-offset: 2px;
  box-shadow: 0 0 0 2px #fff, 0 0 0 4px #3b82f6;
}

/* Display */
.block { display: block; }
.hidden { display: none; }

/* Form Elements */
input, textarea {
  appearance: none;
  background-color: #fff;
}
input:focus, textarea:focus {
  outline: none;
}

/* Responsive - md (768px) */
@media (min-width: 768px) {
  .md\:flex { display: flex; }
  .md\:px-8 { padding-left: 2rem; padding-right: 2rem; }
  .md\:max-w-xl { max-width: 36rem; }
  .md\:text-4xl { font-size: 2.25rem; line-height: 2.5rem; }
}

/* Responsive - lg (1024px) */
@media (min-width: 1024px) {
  .lg\:max-w-2xl { max-width: 42rem; }
}
  
  body { margin: 0; font-family: 'Noto Sans JP', sans-serif; background: #f9fafb; }
  .header { position:sticky;top:0; z-index:50; display:flex; height:64px; align-items:center; justify-content:space-between; background:rgba(255,255,255,0.9); padding:0 32px; box-shadow:0 1px 3px rgba(0,0,0,0.1); backdrop-filter:blur(8px); }
  .header-logo { font-size:1.25rem; font-weight:700; color:#111827; }
  .header-cta { display:inline-block; background:#2563eb; color:#fff; padding:8px 24px; border-radius:9999px; font-size:0.875rem; font-weight:700; text-decoration:none; box-shadow:0 4px 6px rgba(37,99,235,0.3); transition:transform 0.15s; }
  .header-cta:hover { transform:scale(1.05); }
  .main-content { max-width:768px; margin:0 auto; background:#fff; box-shadow:0 25px 50px -12px rgba(0,0,0,0.15); }
  .footer { background:#111827; padding:32px; text-align:center; color:#fff; font-size:0.875rem; opacity:0.7; }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-logo">ClaudeCode育成塾</div>
    <a href="#contact" class="header-cta">お問い合わせはこちら</a>
  </header>
  <main class="main-content">
    <section style="position:relative;width:100%;overflow:hidden;">
      
      <img src="https://jqpavdhxvmvuhwrbnosd.supabase.co/storage/v1/object/public/images/inpaint-1770089481855-25565288.png" alt="hero" style="display:block;width:100%;height:auto;filter: brightness(100%) grayscale(0%)" class="desktop-img" />
      
    </section>
    <section style="position:relative;width:100%;overflow:hidden;">
      
      <img src="https://jqpavdhxvmvuhwrbnosd.supabase.co/storage/v1/object/public/images/sections/51/cropped_3672_1769682035432.png" alt="other" style="display:block;width:100%;height:auto;filter: brightness(100%) grayscale(0%)" class="desktop-img" />
      
    </section>
    <section style="position:relative;width:100%;overflow:hidden;">
      
      <img src="https://jqpavdhxvmvuhwrbnosd.supabase.co/storage/v1/object/public/images/text-fix-1769683134087-554779722.png" alt="other" style="display:block;width:100%;height:auto;filter: brightness(100%) grayscale(0%)" class="desktop-img" />
      
    </section>
    <section style="position:relative;width:100%;overflow:hidden;">
      
      <img src="https://jqpavdhxvmvuhwrbnosd.supabase.co/storage/v1/object/public/images/sections/51/cropped_3692_1769682083143.png" alt="other" style="display:block;width:100%;height:auto;filter: brightness(100%) grayscale(0%)" class="desktop-img" />
      
    </section>
    <section style="position:relative;width:100%;overflow:hidden;">
      
      <img src="https://jqpavdhxvmvuhwrbnosd.supabase.co/storage/v1/object/public/images/sections/51/cropped_3700_1769682102519.png" alt="other" style="display:block;width:100%;height:auto;filter: brightness(100%) grayscale(0%)" class="desktop-img" />
      
    </section>
    <!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>お問い合わせ</title>
  <style>
    :root {
      --color-primary: #2962FF; /* 変更: CTAボタン、アクティブ状態、リンク */
      --color-secondary: #2962FF; /* サブ見出し、補助テキスト */
      --color-accent: #2962FF; /* 差し色、必須マーク、エラー状態のベース */
      --color-bg: #EBF4FF; /* 全体背景 */
      --color-surface: #FFFFFF; /* フォーム領域の背景 */
      --color-border: rgba(0, 0, 0, 0.1); /* 通常のボーダー */
      --color-border-focus: #2962FF; /* フォーカス時のボーダー */
      --color-text: #333; /* テキスト色 */
      --color-text-muted: rgba(0, 0, 0, 0.6); /* placeholder等 */
      --color-error: #dc2626;
    }

    /* Reset */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Hiragino Kaku Gothic ProN", "Noto Sans JP", "Yu Gothic", sans-serif;
      font-size: 16px;
      line-height: 1.7;
      color: var(--color-text);
      background-color: var(--color-bg);
      padding: 20px; /* Adjust padding for smaller screens */
      transition: background-color 150ms ease;
    }

    /* General Styles */
    h1 {
      font-size: clamp(2rem, 5vw, 2.5rem);
      font-weight: 700;
      letter-spacing: -0.05em;
      margin-bottom: 0.5em;
    }

    p {
      margin-bottom: 1.5em;
    }

    a {
      color: var(--color-primary);
      text-decoration: none;
      transition: color 150ms ease;
    }

    a:hover {
      color: #1e40af; /* darken */
    }

    /* Form Container */
    #form-container {
      background-color: var(--color-surface);
      padding: 24px; /* Adjust padding for smaller screens */
      border-radius: 4px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      max-width: 100%; /* Occupy full width on mobile */
      margin: 0 auto;
    }

    /* Progress Bar */
    #progress-bar {
      display: flex;
      justify-content: space-between;
      margin-bottom: 24px; /* Adjust margin for smaller screens */
    }

    .progress-step {
      position: relative;
      font-size: 0.75rem; /* Adjust font size for smaller screens */
      font-weight: 500;
      color: var(--color-text-muted);
    }

    .progress-step.active {
      color: var(--color-primary);
      font-weight: 700;
    }

    .progress-step::before {
      content: "";
      position: absolute;
      top: 50%;
      left: calc(100% + 4px);
      width: 100%;
      height: 1px;
      background-color: var(--color-border);
      transform: translateY(-50%);
      z-index: -1;
    }

    .progress-step:last-child::before {
      display: none;
    }

    .progress-step.completed {
      color: var(--color-primary);
    }

    .progress-step.completed::before {
      background-color: var(--color-primary);
    }

    /* Form Styles */
    form {
      display: grid;
      gap: 12px; /* Adjust gap for smaller screens */
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    label {
      font-size: 0.875rem;
      margin-bottom: 4px;
      display: block;
    }

    label .required {
      color: var(--color-error);
      margin-left: 4px;
    }

    input[type="text"],
    input[type="email"],
    input[type="tel"],
    select,
    textarea {
      font-family: inherit;
      font-size: 1rem;
      padding: 12px;
      border: 1px solid var(--color-border);
      border-radius: 4px;
      background-color: var(--color-surface);
      color: var(--color-text);
      transition: border-color 150ms ease;
      appearance: none; /* Remove default select styles */
      width: 100%; /* Full width on mobile */
      min-height: 44px; /* タップしやすい高さ */
    }

    select {
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23333'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      background-size: 16px;
    }

    input[type="text"]:focus,
    input[type="email"]:focus,
    input[type="tel"]:focus,
    select:focus,
    textarea:focus {
      border-color: var(--color-border-focus);
      outline: none;
      box-shadow: none;
    }

    input::placeholder,
    textarea::placeholder {
      color: var(--color-text-muted);
    }

    textarea {
      resize: vertical;
      min-height: 120px;
    }

    .error-message {
      font-size: 0.75rem;
      color: var(--color-error);
      margin-top: 4px;
    }

    input[aria-invalid="true"],
    textarea[aria-invalid="true"],
    select[aria-invalid="true"] {
      border-color: var(--color-error);
    }

    button {
      font-family: inherit;
      font-size: 1rem;
      font-weight: 600;
      padding: 12px 24px;
      border: none;
      border-radius: 4px;
      background-color: var(--color-primary);
      color: #fff;
      cursor: pointer;
      transition: background-color 150ms ease, opacity 150ms ease;
      width: 100%;
      min-height: 44px; /* タップしやすい高さ */
    }

    button:hover {
      background-color: #1e40af; /* darken */
    }

    button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    button.loading::after {
      content: "";
      display: inline-block;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      border: 2px solid #fff;
      border-top-color: transparent;
      animation: spin 0.75s linear infinite;
      margin-left: 8px;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    /* Confirmation Section Styles */
    #confirmation-section {
      margin-top: 24px; /* Adjust margin for smaller screens */
    }

    #confirmation-section dl {
      display: grid;
      grid-template-columns: auto 1fr;
      gap: 8px 16px;
      margin-bottom: 16px;
    }

    #confirmation-section dt {
      font-weight: 600;
    }

    #confirmation-section dd {
      margin: 0;
    }

    #confirmation-section button {
      margin-top: 16px;
      min-height: 44px; /* タップしやすい高さ */
    }

    /* Completion Section Styles */
    #completion-section {
      text-align: center;
      margin-top: 24px; /* Adjust margin for smaller screens */
    }

    /* Custom Radio Button */
    .radio-group {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }

    .radio-label {
        display: flex;
        align-items: center;
        cursor: pointer;
        gap: 8px;
    }

    .radio-input {
        appearance: none;
        width: 16px;
        height: 16px;
        border: 1px solid var(--color-border);
        border-radius: 50%;
        background-color: var(--color-surface);
        transition: border-color 150ms ease;
        position: relative;
    }

    .radio-input:checked {
        border-color: var(--color-primary);
    }

    .radio-input:checked::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 8px;
        height: 8px;
        background-color: var(--color-primary);
        border-radius: 50%;
    }

    .radio-input:focus {
        outline: none;
        box-shadow: none;
        border-color: var(--color-border-focus);
    }

    /* Custom Checkbox */
    .checkbox-group {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }

    .checkbox-label {
        display: flex;
        align-items: center;
        cursor: pointer;
        gap: 8px;
    }

    .checkbox-input {
        appearance: none;
        width: 16px;
        height: 16px;
        border: 1px solid var(--color-border);
        border-radius: 2px;
        background-color: var(--color-surface);
        transition: border-color 150ms ease;
        position: relative;
    }

    .checkbox-input:checked {
        border-color: var(--color-primary);
        background-color: var(--color-primary);
    }

    .checkbox-input:checked::before {
        content: "✓";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: #fff;
        font-size: 12px;
    }

    .checkbox-input:focus {
        outline: none;
        box-shadow: none;
        border-color: var(--color-border-focus);
    }

    .completion-icon {
        width: 64px;
        height: 64px;
        border-radius: 50%;
        background-color: var(--color-primary);
        color: #fff;
        font-size: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 16px;
    }

    /* Media Queries */
    @media (min-width: 769px) {
      body {
        padding: 40px;
      }
      #form-container {
        padding: 32px;
        max-width: 720px;
      }
      #progress-bar {
        margin-bottom: 32px;
      }
      .progress-step {
        font-size: 0.875rem;
      }
      form {
        grid-template-columns: 1fr 1fr;
        gap: 24px;
      }

      .form-group:nth-child(1),
      .form-group:nth-child(2) {
        grid-column: auto; /* Reset for tablet */
      }
      button {
          width: auto;
          grid-column: 1 / span 2;
          max-width: 200px;
          justify-self: center;
      }
      #confirmation-section {
        margin-top: 32px;
      }
      #completion-section {
        margin-top: 32px;
      }
    }

    @media (min-width: 1024px) {
      #form-container {
        padding: 48px;
      }
    }
  </style>
</head>
<body>
  <div id="form-container">
    <h1>お問い合わせ</h1>
    <p>下記フォームよりお気軽にお問い合わせください。</p>

    <div id="progress-bar">
      <span class="progress-step active" data-step="1">入力</span>
      <span class="progress-step" data-step="2">確認</span>
      <span class="progress-step" data-step="3">完了</span>
    </div>

    <form id="contact-form" role="form" aria-label="お問い合わせフォーム" onsubmit="return submitForm(event)">
      <div class="form-group">
        <label for="company_name">会社名</label>
        <input type="text" id="company_name" name="company_name" placeholder="株式会社〇〇">
        <div id="company_name-error" class="error-message"></div>
      </div>

      <div class="form-group">
        <label for="name">お名前<span class="required">*</span></label>
        <input type="text" id="name" name="name" placeholder="山田 太郎" aria-required="true">
        <div id="name-error" class="error-message"></div>
      </div>

      <div class="form-group">
        <label for="email">メールアドレス<span class="required">*</span></label>
        <input type="email" id="email" name="email" placeholder="example@company.co.jp" aria-required="true">
        <div id="email-error" class="error-message"></div>
      </div>

      <div class="form-group">
        <label for="phone">電話番号</label>
        <input type="tel" id="phone" name="phone" placeholder="03-0000-0000">
        <div id="phone-error" class="error-message"></div>
      </div>

      <div class="form-group">
        <label for="inquiry_type">お問い合わせ種別<span class="required">*</span></label>
        <select id="inquiry_type" name="inquiry_type" aria-required="true">
          <option value="">選択してください</option>
          <option value="サービスについて">サービスについて</option>
          <option value="お見積もり依頼">お見積もり依頼</option>
          <option value="採用について">採用について</option>
          <option value="その他">その他</option>
        </select>
        <div id="inquiry_type-error" class="error-message"></div>
      </div>

      <div class="form-group" style="grid-column: 1 / span 2;">
        <label for="message">お問い合わせ内容<span class="required">*</span></label>
        <textarea id="message" name="message" placeholder="お問い合わせ内容をご記入ください" aria-required="true"></textarea>
        <div id="message-error" class="error-message"></div>
      </div>

      <div class="form-group" style="grid-column: 1 / span 2;">
        <label for="notes">備考・ご要望（任意）</label>
        <textarea id="notes" name="notes" placeholder="納期のご希望や参考URLなど、何でもご自由にご記入ください"></textarea>
        <div id="notes-error" class="error-message"></div>
      </div>

      <button type="submit" id="submit-button">確認画面へ</button>
    </form>

    <section id="confirmation-section" style="display: none;" role="alert">
        <h2>入力内容のご確認</h2>
        <dl>
            <dt>会社名</dt>
            <dd id="confirmation-company_name"></dd>

            <dt>お名前</dt>
            <dd id="confirmation-name"></dd>

            <dt>メールアドレス</dt>
            <dd id="confirmation-email"></dd>

            <dt>電話番号</dt>
            <dd id="confirmation-phone"></dd>

            <dt>お問い合わせ種別</dt>
            <dd id="confirmation-inquiry_type"></dd>

            <dt>お問い合わせ内容</dt>
            <dd id="confirmation-message"></dd>

            <dt>備考・ご要望</dt>
            <dd id="confirmation-notes"></dd>
        </dl>
        <button type="button" id="back-button">戻る</button>
        <button type="button" id="send-button">送信する</button>
    </section>

    <section id="completion-section" style="display: none;" role="status">
        <div class="completion-icon">✓</div>
        <h2>送信が完了しました。</h2>
        <p>2営業日以内にご連絡いたします。</p>
    </section>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('contact-form');
      const submitButton = document.getElementById('submit-button');
      const backButton = document.getElementById('back-button');
      const sendButton = document.getElementById('send-button');
      const confirmationSection = document.getElementById('confirmation-section');
      const completionSection = document.getElementById('completion-section');
      const progressBar = document.getElementById('progress-bar');

      // Error message handling
      const setError = (element, message) => {
          const errorDivId = `${element.id}-error`;
          const errorDiv = document.getElementById(errorDivId);
          if (errorDiv) {
              errorDiv.textContent = message;
          }
          element.setAttribute('aria-invalid', 'true');
          element.setAttribute('aria-describedby', errorDivId);
      };

      const clearError = (element) => {
          const errorDivId = `${element.id}-error`;
          const errorDiv = document.getElementById(errorDivId);
          if (errorDiv) {
              errorDiv.textContent = '';
          }
          element.removeAttribute('aria-invalid');
          element.removeAttribute('aria-describedby');
      };

      // Validation functions
      const validateRequired = (element) => {
          if (!element.value.trim()) {
              setError(element, '必須項目です');
              return false;
          }
          clearError(element);
          return true;
      };

      const validateEmail = (element) => {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; // RFC compliant
          if (!element.value.trim()) return true;
          if (!emailRegex.test(element.value.trim())) {
              setError(element, '正しいメールアドレスを入力してください');
              return false;
          }
          clearError(element);
          return true;
      };

      const validatePhone = (element) => {
          const phoneRegex = /^[0-9-]+$/;
          if (!element.value.trim()) return true;
          if (!phoneRegex.test(element.value.trim())) {
              setError(element, '電話番号は数字とハイフンのみで入力してください');
              return false;
          }
          const cleanedNumber = element.value.replace(/[^0-9]/g, '');
          if (cleanedNumber.length < 10 || cleanedNumber.length > 11) {
              setError(element, '電話番号は10桁または11桁で入力してください');
              return false;
          }
          clearError(element);
          return true;
      };

      // Add blur event listeners for validation
      const requiredFields = form.querySelectorAll('[aria-required="true"]');
      requiredFields.forEach(field => {
          field.addEventListener('blur', () => {
              if (field.type === 'email') {
                  validateEmail(field);
              } else {
                  validateRequired(field);
              }
          });
          field.addEventListener('input', () => {
              if (field.type === 'email') {
                  validateEmail(field);
              } else {
                  validateRequired(field);
              }
          });
      });

      const phoneField = document.getElementById('phone');
      if (phoneField) {
          phoneField.addEventListener('blur', () => validatePhone(phoneField));
          phoneField.addEventListener('input', () => validatePhone(phoneField));
      }

      // Form step management functions
      const showConfirmation = () => {
          let isValid = true;
          const formElements = form.querySelectorAll('input, select, textarea');
          formElements.forEach(element => {
              if (element.ariaRequired === 'true' && !validateRequired(element)) {
                  isValid = false;
              } else if (element.type === 'email' && !validateEmail(element)) {
                  isValid = false;
              } else if (element.id === 'phone' && !validatePhone(element)) {
                isValid = false;
              }
          });

          if (!isValid) return;

          // Populate confirmation section
          document.getElementById('confirmation-company_name').textContent = document.getElementById('company_name').value;
          document.getElementById('confirmation-name').textContent = document.getElementById('name').value;
          document.getElementById('confirmation-email').textContent = document.getElementById('email').value;
          document.getElementById('confirmation-phone').textContent = document.getElementById('phone').value;
          document.getElementById('confirmation-inquiry_type').textContent = document.getElementById('inquiry_type').value;
          document.getElementById('confirmation-message').textContent = document.getElementById('message').value;
          document.getElementById('confirmation-notes').textContent = document.getElementById('notes').value;

          form.style.display = 'none';
          confirmationSection.style.display = 'block';
          completionSection.style.display = 'none';
          updateProgressBar(2); // Step 2
      };

      const showForm = () => {
          form.style.display = 'grid';
          confirmationSection.style.display = 'none';
          completionSection.style.display = 'none';
          updateProgressBar(1); // Step 1
      };

      const showCompletion = () => {
          form.style.display = 'none';
          confirmationSection.style.display = 'none';
          completionSection.style.display = 'block';
          updateProgressBar(3); // Step 3
      };

      // Progress bar update function
      const updateProgressBar = (step) => {
          const steps = progressBar.querySelectorAll('.progress-step');
          steps.forEach(s => {
              s.classList.remove('active', 'completed');
              if (parseInt(s.dataset.step) < step) {
                  s.classList.add('completed');
              } else if (parseInt(s.dataset.step) === step) {
                  s.classList.add('active');
              }
          });
      };

      // API submission function
      async function submitForm(formData) {
          try {
              sendButton.disabled = true;
              sendButton.textContent = '送信中...';
              sendButton.classList.add('loading');

              const response = await fetch('/api/form-submissions', {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify({
                      pageSlug: window.location.pathname.split('/').pop() || 'unknown',
                      formTitle: 'お問い合わせ',
                      formFields: Object.entries(formData).map(([key, value]) => ({
                          fieldName: key,
                          fieldLabel: document.querySelector(`label[for="${key}"]`)?.textContent?.replace('*', '').trim() || key,
                          value: String(value)
                      }))
                  })
              });

              if (response.ok) {
                  showCompletion();
              } else {
                  console.error('Submission failed:', response.status);
                  alert('送信に失敗しました。もう一度お試しください。');
              }
          } catch (error) {
              console.error('Network error:', error);
              alert('ネットワークエラーが発生しました。接続を確認して、もう一度お試しください。');
          } finally {
              sendButton.disabled = false;
              sendButton.textContent = '送信する';
              sendButton.classList.remove('loading');
          }
      }

      // Event listeners for buttons
      submitButton.addEventListener('click', showConfirmation);
      backButton.addEventListener('click', showForm);
      sendButton.addEventListener('click', () => {
        const formData = {
            company_name: document.getElementById('company_name').value,
            name: document.getElementById('name').value,
            email: document.getElementById('email').value,
            phone: document.getElementById('phone').value,
            inquiry_type: document.getElementById('inquiry_type').value,
            message: document.getElementById('message').value,
            notes: document.getElementById('notes').value
        };
          submitForm(formData);
      });
    });

    async function submitForm(event) {
      event.preventDefault();
      const formElement = document.getElementById('contact-form');
      const btn = document.getElementById('submit-button');
      const originalText = btn.textContent;
      btn.disabled = true;
      btn.textContent = '送信中...';

      const formData = new FormData(formElement);
      const fields = [];
      for (const [name, value] of formData.entries()) {
        const input = formElement.querySelector('[name="' + name + '"]');
        let label = input?.closest('div')?.querySelector('label')?.textContent || name;
        if (!label) {
            label = input?.placeholder || name;
        }
        fields.push({ fieldName: name, fieldLabel: label.replace('*', '').trim(), value: String(value) });
      }

      try {
        const res = await fetch('/api/form-submissions', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            pageSlug: 'page-1769678813561',
            formTitle: 'お問い合わせ',
            formFields: fields
          })
        });
        const data = await res.json();
        if (res.ok) {
            alert('送信完了しました');
            formElement.reset();
        } else {
          alert(data.error || '送信に失敗しました');
        }
      } catch (err) {
        alert('送信に失敗しました');
      } finally {
        btn.disabled = false;
        btn.textContent = originalText;
      }
      return false;
    }
  </script>
</body>
</html>
  </main>
  <footer class="footer">
    <p>&copy; 2026 ClaudeCode育成塾</p>
  </footer>
</body>
</html>